<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>prct09</title><meta name="description" content="Documentation for prct09"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">prct09</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>prct09</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#práctica-10" id="práctica-10" style="color: inherit; text-decoration: none;">
  <h1>Práctica 10</h1>
</a>

<a href="#los-github-actions-están-correctamente-configurados" id="los-github-actions-están-correctamente-configurados" style="color: inherit; text-decoration: none;">
  <h2>Los github Actions están correctamente configurados.</h2>
</a>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-edurguezsb?branch=master"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-edurguezsb/badge.svg?branch=master" alt="Coverage Status"></a></p>
<p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-edurguezsb"><img src="https://sonarcloud.io/images/project_badges/sonarcloud-orange.svg" alt="SonarCloud"></a></p>
<p>En esta actividad, la Práctica 10 de la asignatura, se nos plantean realizar una serie de ejercicios, y también a mejorar la aplicación de Funkos que habíamos desarrollado en la práctica anterior. También, al igual que llevamos haciendo en prácticas anteriores hasta ahora, a parte de llevar a cabo una buena estructura y organización de ficheros y directorios, no debemos olvidarnos de utilizar los principios SOLID,sus pruebas TDD o BDD para confirmar el correcto funcionamiento del código desarrollado, todo el código con comentarios tipo TypeDoc, cubrimiento de código con Istanbul y Coveralls, Sonar Cloud para analizar la calidad, y los github actions.</p>
<p>Los objetivos de esta práctica son seguir familiarizándonos con el manejo de las herramientas mencionadas anteriormente ya que son bastante fundamentales a la hora de realizar un proyecto en TypeScript para asegurarnos de que nuestra solución es buena, y que serán necesarios para el correcto desarrollo y avance en la asignatura de Desarrollo de Sistemas Informáticos que próximamente en 2 o 3 prácticas más llegará a su fin.</p>
<p>También será explicado a continuación el ejercicio realizado en clase en el grupo PE103, y después el resto de ejercicios propuestos en el guión:</p>

<a href="#ejercicio-pe103" id="ejercicio-pe103" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio PE103</h2>
</a>

<a href="#enunciado" id="enunciado" style="color: inherit; text-decoration: none;">
  <h3>Enunciado</h3>
</a>
<ul>
<li>Desarrolle un cliente y un servidor en Node.js, haciendo uso de sockets, que incorporen la siguiente funcionalidad:
El cliente debe recibir, desde la línea de comandos, un comando Unix/Linux, además de sus argumentos correspondientes, que ejecutaremos en el servidor.
El servidor debe recibir la petición del cliente, procesarla, esto es, ejecutar el comando solicitado, y devolver la respuesta del comando al cliente. Para ello, piense que el comando solicitado puede haberse ejecutado correctamente o puede haber fallado, por ejemplo, por no existir o porque se le han pasado unos argumentos no válidos.</li>
</ul>

<a href="#código" id="código" style="color: inherit; text-decoration: none;">
  <h4>Código</h4>
</a>
<ul>
<li>En el directorio src/Ejercicio-PE103 tenemos <code>server.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;net&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">spawn</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;child_process&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Creamos un servidor que escucha en el puerto 8100 y espera recibir mensajes JSON desde un cliente.</span><br/><span class="hl-4"> * Cuando se recibe un mensaje que tiene el campo &#39;type&#39; establecido en &#39;command&#39;, ejecuta el comando</span><br/><span class="hl-4"> * especificado en el campo &#39;com&#39; junto con los parámetros especificados en el campo &#39;param&#39;.</span><br/><span class="hl-4"> * El resultado de la ejecución del comando se envía de vuelta al cliente a través de la conexión.</span><br/><span class="hl-4"> */</span><br/><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">((</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// Convertir los datos recibidos en un objeto JavaScript utilizando JSON.parse.</span><br/><span class="hl-1">    </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">mensaje</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// Si el mensaje recibido es un comando, ejecutarlo y enviar la salida de vuelta al cliente.</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&#39;command&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Se ejecutara el comando: &quot;</span><span class="hl-1"> + </span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">com</span><span class="hl-1"> + </span><span class="hl-3">&quot; &quot;</span><span class="hl-1"> + </span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">param</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">salida</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">param</span><span class="hl-1"> == </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// Si no hay parámetros, solo se ejecuta el comando.</span><br/><span class="hl-1">        </span><span class="hl-2">salida</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">com</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// Si hay parámetros, se pasan como argumentos al comando.</span><br/><span class="hl-1">        </span><span class="hl-2">salida</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">com</span><span class="hl-1">, [</span><span class="hl-2">mensaje</span><span class="hl-1">.</span><span class="hl-2">param</span><span class="hl-1">]);</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-4">// Enviar cualquier salida de error del comando de vuelta al cliente a través de la conexión.</span><br/><span class="hl-1">      </span><span class="hl-2">salida</span><span class="hl-1">.</span><span class="hl-2">stderr</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-4">// Enviar cualquier salida estándar del comando de vuelta al cliente a través de la conexión.</span><br/><span class="hl-1">      </span><span class="hl-2">salida</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-4">// Cuando se cierra la conexión, imprimir un mensaje en la consola.</span><br/><span class="hl-1">  </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1"> , () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Cliente ha sido desconectado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-4">// Escuchar en el puerto 8100 y imprimir un mensaje en la consola cuando el servidor está listo.</span><br/><span class="hl-1">}).</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-8">8100</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Servidor a la espera escuchando puerto 8100&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Se crea un servidor que escucha en el puerto 8100 y espera recibir mensajes JSON desde un cliente. Cuando se recibe un mensaje que tiene el campo <code>type</code> establecido en <code>command</code>, ejecuta el comando especificado en el campo <code>com</code> junto con los parámetros especificados en el campo <code>param</code>. El resultado de la ejecución del comando se envía de vuelta al cliente a través de la conexión. Si hay algún error en la ejecución del comando, se envía de vuelta al cliente a través de la conexión. Cuando se cierra la conexión, se imprime un mensaje en la consola. El servidor está listo para recibir conexiones en el puerto 8100.</p>
<ul>
<li>También tenemos <code>client.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;net&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Crear una instancia de un cliente de conexión TCP/IP mediante la librería &#39;net&#39;.</span><br/><span class="hl-4"> * Conectar el cliente al puerto 8100.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">({</span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-8">8100</span><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Se ejecuta cuando el cliente establece conexión con éxito.</span><br/><span class="hl-4"> * Envía un comando al servidor en formato JSON, basado en los argumentos proporcionados al invocar el script.</span><br/><span class="hl-4"> */</span><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;connect&#39;</span><span class="hl-1"> , () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> &lt; </span><span class="hl-8">3</span><span class="hl-1">) { </span><br/><span class="hl-1">    </span><span class="hl-4">// Si no se proporciona ningún comando al invocar el script, se muestra un error y se finaliza el proceso.</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Error: No se ha introducido ningún comando&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-5">exit</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-4">// Enviar un objeto JSON al servidor, indicando el tipo de comando, el comando en sí mismo y un parámetro (si se proporciona).</span><br/><span class="hl-1">  </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><span class="hl-3">&#39;type&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&#39;command&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;com&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">], </span><span class="hl-3">&#39;param&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">3</span><span class="hl-1">]}));</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Se ejecuta cuando el cliente recibe datos del servidor.</span><br/><span class="hl-4"> * Muestra los datos recibidos por la consola y finaliza la conexión.</span><br/><span class="hl-4"> */</span><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">  </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Se ejecuta cuando la conexión con el servidor se cierra.</span><br/><span class="hl-4"> * Muestra un mensaje por consola indicando que el cliente se ha desconectado.</span><br/><span class="hl-4"> */</span><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Cliente desconectado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Este código establece una conexión TCP/IP mediante la librería <code>net</code> con un servidor en el puerto 8100 y envía un comando en formato JSON al servidor, basado en los argumentos proporcionados al invocar el script. Si no se proporciona ningún comando, se muestra un error y se finaliza el proceso. Cuando el cliente recibe datos del servidor, muestra los datos recibidos por la consola y finaliza la conexión. Y cuando la conexión con el servidor se cierra, muestra un mensaje por consola indicando que el cliente se ha desconectado.</p>

<a href="#ejercicio-1" id="ejercicio-1" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 1</h2>
</a>

<a href="#enunciado-1" id="enunciado-1" style="color: inherit; text-decoration: none;">
  <h3>Enunciado</h3>
</a>
<p>Considere el siguiente ejemplo de código fuente TypeScript que hace uso del módulo fs de Node.js:</p>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">access</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> !== </span><span class="hl-8">3</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Please, specify a file&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">filename</span><span class="hl-1"> = </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">];</span><br/><br/><span class="hl-1">  </span><span class="hl-5">access</span><span class="hl-1">(</span><span class="hl-2">filename</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">.</span><span class="hl-7">F_OK</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> does not exist`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Starting to watch file </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">watcher</span><span class="hl-1"> = </span><span class="hl-5">watch</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-8">2</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">watcher</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;change&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> has been modified somehow`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> is no longer watched`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>En primer lugar, ejecute el programa para tratar de comprender qué hace.</p>
<p>A continuación, realice una traza de ejecución mostrando, paso a paso, el contenido de la pila de llamadas, el registro de eventos de la API y la cola de manejadores, además de lo que se muestra por la consola. Para ello, simule que se llevan a cabo, como mínimo, dos modificaciones del fichero helloworld.txt a lo largo de la ejecución. ¿Qué hace la función access? ¿Para qué sirve el objeto constants?</p>

<a href="#resultado" id="resultado" style="color: inherit; text-decoration: none;">
  <h4>Resultado</h4>
</a>
<p>A continuación vemos cual sería la traza: </p>
<ol>
<li><p>El programa se inicia con el comando node programa.js helloworld.txt.
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>Se importan las funciones &#39;access&#39;, &#39;constants&#39; y &#39;watch&#39; del módulo &#39;fs&#39;.
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>La longitud de &#39;process.argv&#39; es 3 (node, programa.js y helloworld.txt).
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>Se asigna el nombre del archivo a la variable &#39;filename&#39;.
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>Se llama a la función &#39;access&#39; con &#39;filename&#39;, &#39;constants.F_OK&#39; y una función de callback.
Pila de llamadas: [Función principal (global), access]</p>
</li>
</ol>
<p>Registro de eventos de la API: []</p>
<ol start="6">
<li>La función &#39;access&#39; verifica si el archivo &#39;helloworld.txt&#39; existe y es accesible.
Pila de llamadas: [Función principal (global)]</li>
</ol>
<p>Registro de eventos de la API: [Verificación de acceso al archivo]</p>
<ol start="7">
<li>La función &#39;access&#39; no encuentra errores y pone en cola la función de callback.
Pila de llamadas: [Función principal (global)]</li>
</ol>
<p>Cola de manejadores: [Función de callback de access]</p>
<ol start="8">
<li><p>La función de callback de &#39;access&#39; se ejecuta.
Pila de llamadas: [Función principal (global), Función de callback de access]</p>
</li>
<li><p>Se imprime en consola: &#39;Starting to watch file helloworld.txt&#39;.
Pila de llamadas: [Función principal (global), Función de callback de access]</p>
</li>
<li><p>Se crea un &#39;watcher&#39; utilizando la función &#39;watch&#39; con &#39;filename&#39; como argumento.
Pila de llamadas: [Función principal (global), Función de callback de access]</p>
</li>
<li><p>Se registra un evento &#39;change&#39; en el &#39;watcher&#39;, que se activa cuando el archivo es modificado.
Pila de llamadas: [Función principal (global), Función de callback de access]</p>
</li>
<li><p>Se imprime en consola: &#39;File helloworld.txt is no longer watched&#39;.
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>El usuario modifica el archivo &#39;helloworld.txt&#39; por primera vez.
Registro de eventos de la API: [Evento &#39;change&#39; en watcher]</p>
</li>
<li><p>El evento &#39;change&#39; se activa y pone en cola el manejador correspondiente.
Pila de llamadas: [Función principal (global)]</p>
</li>
</ol>
<p>Cola de manejadores: [Manejador del evento &#39;change&#39;]</p>
<ol start="15">
<li><p>El manejador del evento &#39;change&#39; se ejecuta.
Pila de llamadas: [Función principal (global), Manejador del evento &#39;change&#39;]</p>
</li>
<li><p>Se imprime en consola: &#39;File helloworld.txt has been modified somehow&#39;.
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>El usuario modifica el archivo &#39;helloworld.txt&#39; por segunda vez.
Registro de eventos de la API: [Evento &#39;change&#39; en watcher]</p>
</li>
<li><p>El evento &#39;change&#39; se activa nuevamente y pone en cola el manejador correspondiente.
Pila de llamadas: [Función principal (global)]</p>
</li>
</ol>
<p>Cola de manejadores: [Manejador del evento &#39;change&#39;]</p>
<ol start="19">
<li><p>El manejador del evento &#39;change&#39; se ejecuta nuevamente.
Pila de llamadas: [Función principal (global), Manejador del evento &#39;change&#39;]</p>
</li>
<li><p>Se imprime en consola: &#39;File helloworld.txt has been modified somehow&#39;.
Pila de llamadas: [Función principal (global)]</p>
</li>
<li><p>No hay más eventos ni acciones por realizar. La ejecución del programa continúa a la espera de más eventos de modificación del archivo. Si el usuario cierra el programa, la pila de llamadas se vaciará y la aplicación finalizará.
Pila de llamadas: [Función principal (global)]</p>
</li>
</ol>
<p>Esta traza de ejecución muestra el contenido de la pila de llamadas, el registro de eventos de la API y la cola de manejadores paso a paso, desde el inicio del programa hasta que se detectan dos modificaciones (como se nos indica en el enunciado) en el archivo <code>helloworld.txt</code> y se imprimen los mensajes correspondientes en la consola.</p>
<p>¿Qué hace la función access?</p>
<p>Es una función asíncrona que comprueba los permisos de acceso a un archivo o directorio. En este caso se comprueba si el archivo existe.</p>
<p>¿Para qué sirve el objeto constants?</p>
<p>Es una constante del paquete fs que determina si el fichero es accesible para lectura, escritura o ejecución, es decir, si el fichero existe.</p>

<a href="#ejercicio-2" id="ejercicio-2" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 2</h2>
</a>

<a href="#enunciado-2" id="enunciado-2" style="color: inherit; text-decoration: none;">
  <h3>Enunciado</h3>
</a>
<p>Escriba una aplicación que proporcione información sobre el número de líneas, palabras o caracteres que contiene un fichero de texto. La ruta donde se encuentra el fichero debe ser un parámetro pasado a la aplicación desde la línea de comandos. Adicionalmente, también deberá indicarle al programa desde la línea de comandos si desea visualizar el número de líneas, palabras, caracteres o combinaciones de ellas. Puede gestionar el paso de parámetros desde la línea de comandos haciendo uso de yargs.</p>
<p>Lleve a cabo el ejercicio anterior de dos maneras diferentes:</p>
<p>Haciendo uso del método pipe de un Stream para poder redirigir la salida de un comando hacia otro.
Sin hacer uso del método pipe, solamente creando los subprocesos necesarios y registrando manejadores a aquellos eventos necesarios para implementar la funcionalidad solicitada.
Para lo anterior, se recomienda leer la documentación de Stream. Piense que la propiedad stdin de un objeto ChildProcess es un Stream de escritura, mientras que su propiedad stdout es un Stream de lectura.</p>
<p>Por último, programe defensivamente, es decir, trate de controlar los potenciales errores que podrían surgir a la hora de ejecutar su programa. Por ejemplo, ¿qué sucedería si indica desde la línea de comandos un fichero que no existe o una opción no válida?</p>

<a href="#código-1" id="código-1" style="color: inherit; text-decoration: none;">
  <h4>Código</h4>
</a>
<ul>
<li>Usando pipe tenemos <code>PipeReader.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-4">/**</span><br/><span class="hl-4"> * Este módulo utiliza el paquete yargs para parsear argumentos de línea de comandos y opciones</span><br/><span class="hl-4"> * para el comando wc (word count) de Linux para contar palabras, líneas y caracteres en un archivo de texto.</span><br/><span class="hl-4"> * También utiliza los paquetes fs y child_process para leer el archivo y ejecutar comandos de shell, respectivamente.</span><br/><span class="hl-4"> *</span><br/><span class="hl-4"> * </span><span class="hl-6">@packageDocumentation</span><br/><span class="hl-4"> */</span><br/><br/><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">readFile</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">spawn</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;child_process&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">hideBin</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs/helpers&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">// Parsear argumentos de línea de comandos con yargs</span><br/><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-5">boolean</span><span class="hl-1">([</span><span class="hl-3">&#39;l&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;w&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;m&#39;</span><span class="hl-1">]) </span><span class="hl-4">// Opciones booleanas que indican qué tipo de recuento de palabras se debe hacer</span><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;word count of a text file&#39;</span><span class="hl-1">, { </span><span class="hl-4">// Comando &quot;wc&quot; para contar palabras de un archivo de texto</span><br/><span class="hl-1">    </span><span class="hl-2">file:</span><span class="hl-1"> { </span><span class="hl-4">// Argumento requerido que especifica el archivo a procesar</span><br/><span class="hl-1">      </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;the file</span><span class="hl-9">\&#39;</span><span class="hl-3">s name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-4">// Función que se ejecuta cuando se llama al comando &quot;wc&quot;</span><br/><span class="hl-1">    </span><span class="hl-5">readFile</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-4">// Leer el archivo especificado en el argumento</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`No existe el fichero </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-10">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">l</span><span class="hl-1">) {     </span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wcl</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-l&#39;</span><span class="hl-1">, </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);     </span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cut</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cut&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-d&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39; &#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;-f&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;1&#39;</span><span class="hl-1">]); </span><br/><br/><span class="hl-1">        </span><span class="hl-2">wcl</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">cut</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">cut</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">w</span><span class="hl-1">) {        </span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wcw</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-w&#39;</span><span class="hl-1">, </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);     </span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cut</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cut&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-d&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39; &#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;-f&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;1&#39;</span><span class="hl-1">]); </span><br/><br/><span class="hl-1">        </span><span class="hl-2">wcw</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">cut</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">cut</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">m</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wcm</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-m&#39;</span><span class="hl-1">, </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);     </span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cut</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cut&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-d&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39; &#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;-f&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;1&#39;</span><span class="hl-1">]); </span><br/><br/><span class="hl-1">        </span><span class="hl-2">wcm</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">cut</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">cut</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">l</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">w</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">m</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;No ha utilizado ninguna de las opciones posibles (--l, --w, --m)&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-5">help</span><span class="hl-1">() </span><span class="hl-4">// Mostrar la ayuda</span><br/><span class="hl-1">  .</span><span class="hl-2">argv</span><span class="hl-1">; </span><span class="hl-4">// Ejecutar el programa</span>
</code></pre>
<p>Este código utiliza los paquetes <code>fs</code>, <code>child_process</code> y <code>yargs</code> para crear una herramienta en línea de comandos que cuenta palabras, líneas y caracteres en un archivo de texto. El script parsea los argumentos de línea de comandos usando yargs y verifica si se han especificado las opciones -l, -w o -m. Dependiendo de las opciones especificadas, el script utiliza spawn para ejecutar los comandos de Linux wc y cut para contar palabras, líneas y caracteres en el archivo de texto. Finalmente, el script muestra los resultados en la consola y, si no se ha especificado ninguna opción, muestra un mensaje de ayuda.</p>
<ul>
<li>Sin usar pipe tenemos <code>NoPipeReader.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-4">/**</span><br/><span class="hl-4"> * Librerías necesarias para la ejecución del script</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">readFile</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">spawn</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;child_process&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">hideBin</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs/helpers&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Configuración de las opciones del script a través de yargs</span><br/><span class="hl-4"> */</span><br/><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Opciones de tipo booleano: l, w, m</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  .</span><span class="hl-5">boolean</span><span class="hl-1">([</span><span class="hl-3">&#39;l&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;w&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;m&#39;</span><span class="hl-1">])</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Definición del comando &quot;wc&quot;</span><br/><span class="hl-4">   * Descripción: cuenta las palabras de un archivo de texto</span><br/><span class="hl-4">   * Parámetro obligatorio: nombre del archivo a contar</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;word count of a text file&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;the file</span><span class="hl-9">\&#39;</span><span class="hl-3">s name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * Lee el archivo especificado y verifica si existe</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-5">readFile</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`No existe el fichero </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-10">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">)</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-4">/**</span><br/><span class="hl-4">       * Ejecuta el comando &quot;wc&quot; en la terminal con el archivo especificado</span><br/><span class="hl-4">       */</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-4">/**</span><br/><span class="hl-4">       * Captura la salida del comando &quot;wc&quot;</span><br/><span class="hl-4">       */</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">data</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-4">/**</span><br/><span class="hl-4">       * Muestra los resultados según las opciones seleccionadas</span><br/><span class="hl-4">       */</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wcOutputArray</span><span class="hl-1"> = </span><span class="hl-2">wcOutput</span><span class="hl-1">.</span><span class="hl-5">split</span><span class="hl-1">(</span><span class="hl-3">&quot; &quot;</span><span class="hl-1">);        </span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">l</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`El fichero </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-10">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3"> tiene </span><span class="hl-6">${</span><span class="hl-2">wcOutputArray</span><span class="hl-10">[</span><span class="hl-8">1</span><span class="hl-10">]</span><span class="hl-6">}</span><span class="hl-3"> líneas.`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">w</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`El fichero </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-10">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3"> tiene </span><span class="hl-6">${</span><span class="hl-2">wcOutputArray</span><span class="hl-10">[</span><span class="hl-8">3</span><span class="hl-10">]</span><span class="hl-6">}</span><span class="hl-3"> palabras.`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">m</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`El fichero </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-10">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3"> tiene </span><span class="hl-6">${</span><span class="hl-2">wcOutputArray</span><span class="hl-10">[</span><span class="hl-8">4</span><span class="hl-10">]</span><span class="hl-6">}</span><span class="hl-3"> caracteres.`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">l</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">w</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">m</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;No ha utilizado ninguna de las opciones posibles (--l, --w, --m)&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-4">/**</span><br/><span class="hl-4">       * Muestra un mensaje de error si ocurre un problema al ejecutar el comando &quot;wc&quot;</span><br/><span class="hl-4">       */</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;error&#39;</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">(</span><span class="hl-3">&#39;Error al ejecutar el comando&#39;</span><span class="hl-1">, </span><span class="hl-2">err</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Muestra la ayuda del script</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  .</span><span class="hl-5">help</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-2">argv</span><span class="hl-1">;</span>
</code></pre>
<p>Toma las opciones de línea de comandos especificadas por el usuario con yargs, lee el archivo de texto con <code>readFile</code>, ejecuta el comando wc en la terminal para contar el número de palabras, líneas o caracteres en el archivo y muestra los resultados según las opciones seleccionadas por el usuario.</p>

<a href="#ejercicio-3---funkosapp" id="ejercicio-3---funkosapp" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 3 - FunkosAPP</h2>
</a>

<a href="#enunciado-3" id="enunciado-3" style="color: inherit; text-decoration: none;">
  <h3>Enunciado</h3>
</a>
<p>En este ejercicio tendrá que partir de la implementación de la aplicación de registro de Funko Pops que llevó a cabo en la Práctica 9 para escribir un servidor y un cliente haciendo uso de los sockets proporcionados por el módulo net de Node.js. Las operaciones que podrá solicitar el cliente al servidor deberán ser las mismas que ya implementó durante la Práctica 9, esto es, añadir, modificar, eliminar, listar y mostrar Funko Pops de un usuario concreto. Un usuario interactuará con el cliente de la aplicación, exclusivamente, a través de la línea de comandos. Al mismo tiempo, en el servidor, la información de los Funko Pops se almacenará en ficheros JSON en el sistema de ficheros, siguiendo la misma estructura de directorios utilizada durante la Práctica 9.</p>

<a href="#código-2" id="código-2" style="color: inherit; text-decoration: none;">
  <h4>Código</h4>
</a>
<p>A continuación se explica cada fichero de nuestra App:</p>
<ul>
<li><code>Client.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;net&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">hideBin</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs/helpers&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoPop</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../Funko/FunkoPop.js&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">RequestType</span><span class="hl-1">, </span><span class="hl-2">ResponseType</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./FunkoApp.js&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">checkType</span><span class="hl-1">, </span><span class="hl-2">checkGenre</span><span class="hl-1">, </span><span class="hl-2">createFunko</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./Helpers.js&#39;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Representa las opciones que un usuario puede pasar como argumentos a la línea de comandos.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">UserOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Representa las opciones básicas que un usuario puede pasar como argumentos a la línea de comandos.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">BasicOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">  </span><span class="hl-2">id_</span><span class="hl-1">: </span><span class="hl-11">number</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Representa todas las opciones que un usuario puede pasar como argumentos a la línea de comandos.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">Options</span><span class="hl-1"> </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-11">BasicOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">  </span><span class="hl-2">desc</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">  </span><span class="hl-2">genre</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">  </span><span class="hl-2">brand</span><span class="hl-1">: </span><span class="hl-11">string</span><br/><span class="hl-1">  </span><span class="hl-2">brandId</span><span class="hl-1">: </span><span class="hl-11">number</span><br/><span class="hl-1">  </span><span class="hl-2">price</span><span class="hl-1">: </span><span class="hl-11">number</span><br/><span class="hl-1">  </span><span class="hl-2">exclusive</span><span class="hl-1">: </span><span class="hl-11">boolean</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Crea y devuelve una opción para ser usada en la línea de comandos.</span><br/><span class="hl-4"> *</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">desc</span><span class="hl-4"> - La descripción de la opción.</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">tp</span><span class="hl-4"> - El tipo de la opción.</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">demand</span><span class="hl-4"> - Indica si la opción es obligatoria o no.</span><br/><span class="hl-4"> * </span><span class="hl-6">@returns</span><span class="hl-4"> La opción creada.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-2">desc</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">, </span><span class="hl-2">tp</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">, </span><span class="hl-2">demand</span><span class="hl-1">: </span><span class="hl-11">boolean</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">option</span><span class="hl-1"> = {}</span><br/><span class="hl-1">  </span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">assign</span><span class="hl-1">(</span><span class="hl-2">option</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-2">desc</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-2">tp</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-2">demand</span><span class="hl-1">,</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">option</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Agrega la opción &#39;user&#39; a la línea de comandos.</span><br/><span class="hl-4"> *</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">yargs</span><span class="hl-4"> - La instancia de yargs a la que se agrega la opción.</span><br/><span class="hl-4"> * </span><span class="hl-6">@returns</span><span class="hl-4"> La instancia de yargs con la opción agregada.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-5">UserData</span><span class="hl-1"> = (</span><span class="hl-2">yargs</span><span class="hl-1">: </span><span class="hl-11">yargs</span><span class="hl-1">.</span><span class="hl-11">Argv</span><span class="hl-1">&lt;</span><span class="hl-11">UserOptions</span><span class="hl-1">&gt;) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1">.</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;user&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Agrega las opciones &#39;user&#39; e &#39;id&#39; a la línea de comandos.</span><br/><span class="hl-4"> *</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">yargs</span><span class="hl-4"> - La instancia de yargs a la que se agregan las opciones.</span><br/><span class="hl-4"> * </span><span class="hl-6">@returns</span><span class="hl-4"> La instancia de yargs con las opciones agregadas.</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-5">BasicData</span><span class="hl-1"> = (</span><span class="hl-2">yargs</span><span class="hl-1">: </span><span class="hl-11">yargs</span><span class="hl-1">.</span><span class="hl-11">Argv</span><span class="hl-1">&lt;</span><span class="hl-11">BasicOptions</span><span class="hl-1">&gt;) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">yargs</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;user&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;id&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko ID&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Agrega todas las opciones a la línea de comandos.</span><br/><span class="hl-4"> *</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">yargs</span><span class="hl-4"> - La instancia de yargs a la que se agregan las opciones.</span><br/><span class="hl-4"> * </span><span class="hl-6">@returns</span><span class="hl-4"> La instancia de yargs con las opciones agregadas.</span><br/><span class="hl-4"> */</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-5">FunkoData</span><span class="hl-1"> = (</span><span class="hl-2">yargs</span><span class="hl-1">: </span><span class="hl-11">yargs</span><span class="hl-1">.</span><span class="hl-11">Argv</span><span class="hl-1">&lt;</span><span class="hl-11">Options</span><span class="hl-1">&gt;) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">yargs</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;user&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;User name&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;id&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko ID&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko name&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;desc&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko description&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;type&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko type&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;genre&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko genre&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;brand&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko brand&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;brandId&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko brand ID&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;price&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko price&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-6">true</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">option</span><span class="hl-1">(</span><span class="hl-3">&#39;exclusive&#39;</span><span class="hl-1">, </span><span class="hl-5">FillOption</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko exclusive&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">, </span><span class="hl-6">false</span><span class="hl-1">))</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Representa un cliente que se comunica con un servidor utilizando sockets para realizar operaciones CRUD en figuras Funko Pop.</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-11">Client</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * El socket utilizado para comunicarse con el servidor.</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">socket</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">Socket</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * Crea una nueva instancia de cliente con las opciones especificadas.</span><br/><span class="hl-4">     *</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">port</span><span class="hl-4"> - El número de puerto al que se conectará el cliente.</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">request</span><span class="hl-4"> - La solicitud inicial para enviar al servidor.</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-6">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">port</span><span class="hl-1"> = -</span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-11">RequestType</span><span class="hl-1"> = { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;unknown&#39;</span><span class="hl-1">, </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-3">&#39;&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">    ) {</span><br/><span class="hl-1">      </span><span class="hl-4">// Crea una interfaz de línea de comando para analizar la entrada del usuario</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">commands</span><span class="hl-1"> = </span><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-5">slice</span><span class="hl-1">(</span><span class="hl-8">2</span><span class="hl-1">))</span><br/><span class="hl-1">        </span><span class="hl-4">// Agrega un comando para agregar una nueva figura Funko Pop</span><br/><span class="hl-1">        .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Agrega una figura Funko Pop&#39;</span><span class="hl-1">, </span><span class="hl-2">FunkoData</span><span class="hl-1">, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> &amp;&amp; !</span><span class="hl-5">checkType</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">)) </span><span class="hl-0">return</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1"> &amp;&amp; !</span><span class="hl-5">checkGenre</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">)) </span><span class="hl-0">return</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funko</span><span class="hl-1"> = </span><span class="hl-5">createFunko</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">)</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">funkoPop:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">,</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-4">// Agrega un comando para actualizar una figura Funko Pop existente</span><br/><span class="hl-1">        .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Actualiza una figura Funko Pop&#39;</span><span class="hl-1">, </span><span class="hl-2">FunkoData</span><span class="hl-1">, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> &amp;&amp; !</span><span class="hl-5">checkType</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">)) </span><span class="hl-0">return</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1"> &amp;&amp; !</span><span class="hl-5">checkGenre</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">)) </span><span class="hl-0">return</span><br/><span class="hl-1">  </span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funko</span><span class="hl-1"> = </span><span class="hl-5">createFunko</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">)</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">funkoPop:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">,</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-4">// Agrega un comando para eliminar una figura Funko Pop existente</span><br/><span class="hl-1">        .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Elimina una figura Funko Pop&#39;</span><span class="hl-1">, </span><span class="hl-2">BasicData</span><span class="hl-1">, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-4">// Agrega un comando para listar todas las figuras Funko Pop existentes</span><br/><span class="hl-1">        .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Lista todas las figuras Funko Pop&#39;</span><span class="hl-1">, </span><span class="hl-2">UserData</span><span class="hl-1">, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-4">// Agrega un comando para buscar una figura Funko Pop por su ID</span><br/><span class="hl-1">        .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Busca una figura Funko Pop por su ID&#39;</span><span class="hl-1">, </span><span class="hl-2">BasicData</span><span class="hl-1">, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        .</span><span class="hl-5">help</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><br/><span class="hl-1">      </span><span class="hl-4">// Analiza los argumentos de la línea de comando si se proporcionan, de lo contrario muestra la ayuda</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> &gt; </span><span class="hl-8">2</span><span class="hl-1">) </span><span class="hl-2">commands</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">()</span><br/><span class="hl-1">      </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">commands</span><span class="hl-1">.</span><span class="hl-5">showHelp</span><span class="hl-1">()</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> &lt; </span><span class="hl-8">0</span><span class="hl-1">) </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Puerto no válido&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">  }</span><br/><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Se conecta al servidor a través de un socket, envía una solicitud y llama al callback con la respuesta.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{RequestType}</span><span class="hl-4"> </span><span class="hl-2">request</span><span class="hl-4"> - La solicitud que se enviará al servidor.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{(response: ResponseType) =&gt; void}</span><span class="hl-4"> </span><span class="hl-2">callback</span><span class="hl-4"> - La función que se llamará con la respuesta del servidor.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> </span><span class="hl-11">{void}</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">connect</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-11">RequestType</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">callback</span><span class="hl-1">: (</span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-11">ResponseType</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1">, </span><span class="hl-3">&#39;localhost&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">blue</span><span class="hl-1">(</span><span class="hl-3">`Client connected to port </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">port</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">processCommand</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">, (</span><span class="hl-2">response</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-5">callback</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Procesa una solicitud y llama al callback con la respuesta del servidor.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{RequestType}</span><span class="hl-4"> </span><span class="hl-2">request</span><span class="hl-4"> - La solicitud que se enviará al servidor.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{(response: ResponseType | undefined) =&gt; void}</span><span class="hl-4"> </span><span class="hl-2">callback</span><span class="hl-4"> - La función que se llamará con la respuesta del servidor.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> </span><span class="hl-11">{void}</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">processCommand</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-11">RequestType</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">callback</span><span class="hl-1">: (</span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-11">ResponseType</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> === </span><span class="hl-3">&#39;unknown&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Unknown command&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">      </span><span class="hl-5">callback</span><span class="hl-1">(</span><span class="hl-6">undefined</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">blue</span><span class="hl-1">(</span><span class="hl-3">`Sending request to server: </span><span class="hl-6">${</span><span class="hl-7">JSON</span><span class="hl-10">.</span><span class="hl-5">stringify</span><span class="hl-10">(</span><span class="hl-2">request</span><span class="hl-10">)</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">)</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">) + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">chunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">data</span><span class="hl-1"> += </span><span class="hl-2">chunk</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">()</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1">: </span><span class="hl-11">ResponseType</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko added successfully&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Already exists a funko with that ID&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko updated successfully&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;There is no funko with that ID&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&#39;Funko removed successfully&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;There is no funko with that ID&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">funkoPops</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-0">return</span><br/><span class="hl-1">            </span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">funkoPops</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-2">funko</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">FunkoPop</span><span class="hl-1">.</span><span class="hl-5">print</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">)</span><br/><span class="hl-1">            })</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;There are no funkos&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><br/><span class="hl-1">        </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">funkoPops</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1">) </span><span class="hl-0">return</span><br/><span class="hl-1">            </span><span class="hl-2">FunkoPop</span><span class="hl-1">.</span><span class="hl-5">print</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">funkoPops</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">])</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;There is no funko with that ID&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">          </span><span class="hl-0">break</span><br/><span class="hl-1">        </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Invalid response&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-5">callback</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">)</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Aquí tenemos al cliente que se comunica con un servidor utilizando sockets para realizar ciertas operaciones en figuras Funko Pop. Define varias interfaces y funciones que agregan opciones a la línea de comandos. Luego, utiliza la instancia de yargs para analizar la entrada del usuario y construir una solicitud que se envía al servidor a través del socket. El cliente recibe la respuesta del servidor y la procesa para imprimir mensajes de éxito o error según corresponda.</p>
<ul>
<li><code>FunkoApp.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;net&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoPop</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../Funko/FunkoPop.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">User</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../User/user.js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Operaciones que se pueden realizar en la aplicación</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-11">Operation</span><span class="hl-1"> =</span><br/><span class="hl-1">  | </span><span class="hl-3">&#39;add&#39;</span><br/><span class="hl-1">  | </span><span class="hl-3">&#39;update&#39;</span><br/><span class="hl-1">  | </span><span class="hl-3">&#39;remove&#39;</span><br/><span class="hl-1">  | </span><span class="hl-3">&#39;search&#39;</span><br/><span class="hl-1">  | </span><span class="hl-3">&#39;list&#39;</span><br/><span class="hl-1">  | </span><span class="hl-3">&#39;unknown&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Tipos de solicitudes que se pueden hacer en la aplicación</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-11">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">; </span><span class="hl-4">// Usuario que hace la solicitud</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">Operation</span><span class="hl-1">; </span><span class="hl-4">// Tipo de operación que se va a realizar</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPop</span><span class="hl-1">?: </span><span class="hl-11">FunkoPop</span><span class="hl-1">; </span><span class="hl-4">// Información del FunkoPop en caso de ser necesaria</span><br/><span class="hl-1">  </span><span class="hl-2">id</span><span class="hl-1">?: </span><span class="hl-11">number</span><span class="hl-1">; </span><span class="hl-4">// Identificador del FunkoPop en caso de ser necesario</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Tipos de respuestas que se pueden obtener en la aplicación</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-11">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">Operation</span><span class="hl-1">; </span><span class="hl-4">// Tipo de operación que se realizó</span><br/><span class="hl-1">  </span><span class="hl-2">success</span><span class="hl-1">: </span><span class="hl-11">boolean</span><span class="hl-1">; </span><span class="hl-4">// Indica si la operación se realizó correctamente</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPops</span><span class="hl-1">?: </span><span class="hl-11">FunkoPop</span><span class="hl-1">[]; </span><span class="hl-4">// Información de los FunkoPops en caso de ser necesario</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Clase que representa la aplicación de FunkoPops</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-11">FunkoApp</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">server</span><span class="hl-1">: </span><span class="hl-11">net</span><span class="hl-1">.</span><span class="hl-11">Server</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">Server</span><span class="hl-1">(); </span><span class="hl-4">// Servidor de net</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Constructor de la aplicación de FunkoPops</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">port</span><span class="hl-4"> Puerto en el que se va a iniciar el servidor</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">port</span><span class="hl-1"> = -</span><span class="hl-8">1</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> &gt;= </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">start</span><span class="hl-1">(); </span><span class="hl-4">// Inicia el servidor</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Invalid port&#39;</span><span class="hl-1">)); </span><span class="hl-4">// Muestra un mensaje de error en caso de que el puerto sea inválido</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Método que inicia el servidor de la aplicación</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">start</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">handleConnection</span><span class="hl-1">).</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Server listening on port </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">port</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">)); </span><span class="hl-4">// Muestra un mensaje en la consola indicando que el servidor está escuchando en un puerto específico</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Método que maneja la conexión del servidor</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">handleConnection</span><span class="hl-1"> = (</span><span class="hl-2">connection</span><span class="hl-1">: </span><span class="hl-11">net</span><span class="hl-1">.</span><span class="hl-11">Socket</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-3">&#39;Client connected&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">chunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">data</span><span class="hl-1"> += </span><span class="hl-2">chunk</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">()</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">includes</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1">: </span><span class="hl-11">RequestType</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">proccessRequest</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">)))</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">()</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-3">&#39;Client disconnected&#39;</span><span class="hl-1">))</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Método privado para procesar una solicitud y devolver una respuesta</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">request</span><span class="hl-4"> - Tipo de solicitud a procesar</span><br/><span class="hl-4"> * </span><span class="hl-6">@returns</span><span class="hl-4"> Respuesta a la solicitud</span><br/><span class="hl-4"> */</span><br/><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">proccessRequest</span><span class="hl-1"> = (</span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-11">RequestType</span><span class="hl-1">): </span><span class="hl-11">ResponseType</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// Se crea una instancia del usuario a partir de los datos de la solicitud</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">User</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">// Se carga la colección del usuario</span><br/><span class="hl-1">    </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-5">load</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">// Se inicializa la respuesta como desconocida y sin éxito</span><br/><span class="hl-1">    </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-11">ResponseType</span><span class="hl-1"> = { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;unknown&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> }</span><br/><span class="hl-1">    </span><span class="hl-4">// Se ejecuta una acción en función del tipo de solicitud</span><br/><span class="hl-1">    </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">processAdd</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">processUpdate</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">processRemove</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">processSearch</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">request</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">processList</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-4">// Se guarda la colección actualizada del usuario</span><br/><span class="hl-1">    </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-5">save</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">// Se devuelve la respuesta a la solicitud</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">response</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Método privado para procesar la solicitud de añadir un FunkoPop a la colección de un usuario</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">user</span><span class="hl-4"> - Usuario al que se va a añadir el FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> - FunkoPop que se va a añadir a la colección del usuario</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Respuesta a la solicitud de añadir un FunkoPop</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">processAdd</span><span class="hl-1"> = (</span><br/><span class="hl-1">    </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">User</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><br/><span class="hl-1">  ): </span><span class="hl-11">ResponseType</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// Si se proporciona un FunkoPop para añadir, se añade a la colección del usuario y se devuelve una respuesta de éxito o fracaso según el resultado</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">).</span><span class="hl-5">includes</span><span class="hl-1">(</span><span class="hl-3">&#39;Already exists&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        ? { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> }</span><br/><span class="hl-1">        : { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> }</span><br/><span class="hl-1">    </span><span class="hl-4">// Si no se proporciona un FunkoPop, se devuelve una respuesta de fracaso</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Método privado para procesar la solicitud de actualizar un FunkoPop en la colección de un usuario</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">user</span><span class="hl-4"> - Usuario al que se va a actualizar el FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> - FunkoPop que se va a actualizar en la colección del usuario</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Respuesta a la solicitud de actualizar un FunkoPop</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">processUpdate</span><span class="hl-1"> = (</span><br/><span class="hl-1">    </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">User</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><br/><span class="hl-1">  ): </span><span class="hl-11">ResponseType</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// Si se proporciona un FunkoPop para actualizar, se actualiza en la colección del usuario y se devuelve una respuesta de éxito o fracaso según el resultado</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">user</span><br/><span class="hl-1">        .</span><span class="hl-5">updateFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-5">includes</span><span class="hl-1">(</span><span class="hl-3">`not in </span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><span class="hl-1">)</span><br/><span class="hl-1">        ? { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> }</span><br/><span class="hl-1">        : { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> }</span><br/><span class="hl-1">    </span><span class="hl-4">// Si no se proporciona un FunkoPop, se devuelve una respuesta de fracaso</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * Procesa la solicitud de eliminación de un FunkoPop de la colección de un usuario.</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">user</span><span class="hl-4"> - Usuario al que pertenece la colección.</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> - FunkoPop que se desea eliminar.</span><br/><span class="hl-4">     * </span><span class="hl-6">@returns</span><span class="hl-4"> Objeto que indica si la operación fue exitosa o no.</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">processRemove</span><span class="hl-1"> = (</span><br/><span class="hl-1">      </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">User</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><br/><span class="hl-1">    ): </span><span class="hl-11">ResponseType</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">user</span><br/><span class="hl-1">          .</span><span class="hl-5">removeFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">          .</span><span class="hl-5">includes</span><span class="hl-1">(</span><span class="hl-3">`not in </span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><span class="hl-1">)</span><br/><span class="hl-1">          ? { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> } </span><span class="hl-4">// si el FunkoPop no fue encontrado, la operación no fue exitosa</span><br/><span class="hl-1">          : { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> } </span><span class="hl-4">// si el FunkoPop fue encontrado y eliminado, la operación fue exitosa</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> } </span><span class="hl-4">// si el parámetro funkoPop es undefined, la operación no fue exitosa</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * Procesa la solicitud de búsqueda de un FunkoPop en la colección de un usuario.</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">user</span><span class="hl-4"> - Usuario al que pertenece la colección.</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> - FunkoPop que se desea buscar.</span><br/><span class="hl-4">     * </span><span class="hl-6">@returns</span><span class="hl-4"> Objeto que indica si la operación fue exitosa o no, y opcionalmente los FunkoPops encontrados.</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">processSearch</span><span class="hl-1"> = (</span><br/><span class="hl-1">      </span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">User</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1"> | </span><span class="hl-11">undefined</span><br/><span class="hl-1">    ): </span><span class="hl-11">ResponseType</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funkoPop</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">user</span><br/><span class="hl-1">          .</span><span class="hl-5">searchFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">          .</span><span class="hl-5">includes</span><span class="hl-1">(</span><span class="hl-3">`not in </span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><span class="hl-1">)</span><br/><span class="hl-1">          ? { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> } </span><span class="hl-4">// si el FunkoPop no fue encontrado, la operación no fue exitosa</span><br/><span class="hl-1">          : { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-2">funkoPops:</span><span class="hl-1"> [</span><span class="hl-2">funkoPop</span><span class="hl-1">] } </span><span class="hl-4">// si el FunkoPop fue encontrado, la operación fue exitosa y se devuelve en un arreglo</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;search&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> } </span><span class="hl-4">// si el parámetro funkoPop es undefined, la operación no fue exitosa</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * Procesa la solicitud de listar todos los FunkoPops de la colección de un usuario.</span><br/><span class="hl-4">     * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">user</span><span class="hl-4"> - Usuario al que pertenece la colección.</span><br/><span class="hl-4">     * </span><span class="hl-6">@returns</span><span class="hl-4"> Objeto que indica si la operación fue exitosa o no, y opcionalmente los FunkoPops encontrados.</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">processList</span><span class="hl-1"> = (</span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-11">User</span><span class="hl-1">): </span><span class="hl-11">ResponseType</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> === </span><span class="hl-8">0</span><span class="hl-1">) </span><span class="hl-0">return</span><span class="hl-1"> { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> } </span><span class="hl-4">// si la colección del usuario está vacía, la operación no fue exitosa</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> { </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">, </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-2">funkoPops:</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1"> } </span><span class="hl-4">// si la colección del usuario tiene elementos, la operación fue exitosa y se devuelve en un arreglo</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">    </span><span class="hl-4">/**</span><br/><span class="hl-4">     * Detiene el servidor.</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">stop</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">close</span><span class="hl-1">() </span><span class="hl-4">// cierra el servidor</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<p> Aquí utilizamos la biblioteca Node.js net para crear un servidor que maneja solicitudes JSON desde clientes y devuelve respuestas JSON. La clase <code>FunkoApp</code> es la encargada de procesar las solicitudes recibidas y realizar las operaciones correspondientes en la colección de FunkoPops del usuario. Las solicitudes se definen mediante tipos, que incluyen el tipo de operación a realizar, el usuario que hace la solicitud, la información del FunkoPop y un identificador de FunkoPop. Las respuestas también se definen mediante tipos y contienen el tipo de operación realizada, una indicación de si la operación se realizó con éxito y, en algunos casos, la información de los FunkoPops afectados.</p>
<ul>
<li><code>Helpers.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;yargs&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoType</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../Funko/Type.js&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoGenre</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../Funko/Genre.js&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoPop</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../Funko/FunkoPop.js&#39;</span><br/><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Función que verifica si el tipo de Funko es válido.</span><br/><span class="hl-4"> * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">type</span><span class="hl-4"> Tipo de Funko.</span><br/><span class="hl-4"> * </span><span class="hl-6">@returns</span><span class="hl-4"> Devuelve `true` si el tipo es válido, `false` en caso contrario.</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">checkType</span><span class="hl-1">(</span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">): </span><span class="hl-11">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">values</span><span class="hl-1">(</span><span class="hl-2">FunkoType</span><span class="hl-1">).</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">FunkoType</span><span class="hl-1">) === -</span><span class="hl-8">1</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Invalid type&#39;</span><span class="hl-1">)); </span><span class="hl-4">// Imprime en consola un mensaje de error en rojo.</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Función que verifica si el género de Funko es válido.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">genre</span><span class="hl-4"> Género de Funko.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Devuelve `true` si el género es válido, `false` en caso contrario.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">checkGenre</span><span class="hl-1">(</span><span class="hl-2">genre</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">): </span><span class="hl-11">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">values</span><span class="hl-1">(</span><span class="hl-2">FunkoGenre</span><span class="hl-1">).</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-2">genre</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">FunkoGenre</span><span class="hl-1">) === -</span><span class="hl-8">1</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&#39;Invalid genre&#39;</span><span class="hl-1">)); </span><span class="hl-4">// Imprime en consola un mensaje de error en rojo.</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Función que crea un nuevo FunkoPop a partir de los argumentos pasados en `argv`.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">argv</span><span class="hl-4"> Argumentos desde la línea de comandos.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Devuelve un nuevo objeto `FunkoPop`.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">createFunko</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">: </span><span class="hl-11">yargs</span><span class="hl-1">.</span><span class="hl-11">Arguments</span><span class="hl-1">): </span><span class="hl-11">FunkoPop</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">FunkoPop</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">desc</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">FunkoType</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">FunkoGenre</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">brand</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">brandId</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">price</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-11">number</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>La función <code>checkType</code> verifica si el tipo de Funko es válido y devuelve true si es así, de lo contrario devuelve false. La función <code>checkGenre</code> hace lo mismo para el género. Ambas funciones imprimen un mensaje de error en la consola si el tipo o género son inválidos.</p>
<p>La función <code>createFunko</code> utiliza la biblioteca Yargs para analizar los argumentos pasados en la línea de comandos y crea un nuevo objeto FunkoPop utilizando los valores correspondientes de los argumentos. Luego devuelve el nuevo objeto FunkoPop.</p>
<ul>
<li><code>BasicFunkoPop.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoType</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./Type.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoGenre</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./Genre.js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Interfaz para representar la información básica de un Funko Pop.</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">BasicFunkoPopInfo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Identificador del Funko Pop.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Nombre del Funko Pop.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Descripción del Funko Pop.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">description</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo del Funko Pop.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">FunkoType</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Género del Funko Pop.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">genre</span><span class="hl-1">: </span><span class="hl-11">FunkoGenre</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Clase abstracta que representa la información básica de un Funko Pop.</span><br/><span class="hl-4"> * Esta clase implementa la interfaz BasicFunkoPopInfo.</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">abstract</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-11">BasicFunkoPop</span><span class="hl-1"> </span><span class="hl-6">implements</span><span class="hl-1"> </span><span class="hl-11">BasicFunkoPopInfo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Constructor de la clase BasicFunkoPop.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">id</span><span class="hl-4"> Identificador del Funko Pop.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">name</span><span class="hl-4"> Nombre del Funko Pop.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">description</span><span class="hl-4"> Descripción del Funko Pop.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">type</span><span class="hl-4"> Tipo del Funko Pop.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">genre</span><span class="hl-4"> Género del Funko Pop.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-6">readonly</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">description</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">FunkoType</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">genre</span><span class="hl-1">: </span><span class="hl-11">FunkoGenre</span><span class="hl-1">,</span><br/><span class="hl-1">  ) {}</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Se incluye una interfaz llamada <code>BasicFunkoPopInfo</code> y una clase abstracta llamada <code>BasicFunkoPop</code> que implementa esa interfaz. La interfaz define las propiedades de un Funko Pop, como el identificador, nombre, descripción, tipo y género. La clase <code>BasicFunkoPop</code> implementa estas propiedades y las inicializa a través de su constructor. La clase es abstracta, lo que significa que no se puede instanciar directamente, sino que debe ser extendida por otras clases que proporcionen la funcionalidad específica de cada Funko Pop.</p>
<ul>
<li><code>FunkoPop.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">BasicFunkoPop</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./BasicFunkoPop.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoType</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./Type.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoGenre</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;./Genre.js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Interfaz que define la información básica de un FunkoPop</span><br/><span class="hl-4"> * </span><span class="hl-6">@interface</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">FunkoPopInfo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/** Marca del FunkoPop */</span><br/><span class="hl-1">  </span><span class="hl-2">brand</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">/** Identificador de la marca del FunkoPop */</span><br/><span class="hl-1">  </span><span class="hl-2">brandId</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">/** Precio de mercado del FunkoPop */</span><br/><span class="hl-1">  </span><span class="hl-2">marketPrice</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">/** Indica si el FunkoPop es exclusivo */</span><br/><span class="hl-1">  </span><span class="hl-2">exclusive</span><span class="hl-1">: </span><span class="hl-11">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">/** Información especial del FunkoPop */</span><br/><span class="hl-1">  </span><span class="hl-2">especial</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Clase que representa un FunkoPop</span><br/><span class="hl-4"> * </span><span class="hl-6">@class</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-11">FunkoPop</span><span class="hl-1"> </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-11">BasicFunkoPop</span><span class="hl-1"> </span><span class="hl-6">implements</span><span class="hl-1"> </span><span class="hl-11">FunkoPopInfo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Constructor de la clase FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@constructor</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{number}</span><span class="hl-4"> </span><span class="hl-2">id</span><span class="hl-4"> - Identificador del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{string}</span><span class="hl-4"> </span><span class="hl-2">name</span><span class="hl-4"> - Nombre del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{string}</span><span class="hl-4"> </span><span class="hl-2">description</span><span class="hl-4"> - Descripción del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{FunkoType}</span><span class="hl-4"> </span><span class="hl-2">type</span><span class="hl-4"> - Tipo del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{FunkoGenre}</span><span class="hl-4"> </span><span class="hl-2">genre</span><span class="hl-4"> - Género del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{string}</span><span class="hl-4"> </span><span class="hl-2">[brand</span><span class="hl-1">=</span><span class="hl-2">&#39;&#39;]</span><span class="hl-4"> - Marca del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{number}</span><span class="hl-4"> </span><span class="hl-2">[brandId</span><span class="hl-1">=</span><span class="hl-2">0]</span><span class="hl-4"> - Identificador de la marca del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{number}</span><span class="hl-4"> </span><span class="hl-2">[marketPrice</span><span class="hl-1">=</span><span class="hl-2">0]</span><span class="hl-4"> - Precio de mercado del FunkoPop</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{boolean}</span><span class="hl-4"> </span><span class="hl-2">[exclusive</span><span class="hl-1">=</span><span class="hl-2">false]</span><span class="hl-4"> - Indica si el FunkoPop es exclusivo</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{string}</span><span class="hl-4"> </span><span class="hl-2">[especial</span><span class="hl-1">=</span><span class="hl-2">&#39;&#39;]</span><span class="hl-4"> - Información especial del FunkoPop</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">description</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-11">FunkoType</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">genre</span><span class="hl-1">: </span><span class="hl-11">FunkoGenre</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">brand</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">brandId</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">marketPrice</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">exclusive</span><span class="hl-1"> = </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">especial</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-6">super</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">, </span><span class="hl-2">name</span><span class="hl-1">, </span><span class="hl-2">description</span><span class="hl-1">, </span><span class="hl-2">type</span><span class="hl-1">, </span><span class="hl-2">genre</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Método estático que imprime la información de un FunkoPop en la consola</span><br/><span class="hl-4">   * </span><span class="hl-6">@static</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-11">{FunkoPop}</span><span class="hl-4"> </span><span class="hl-2">funko</span><span class="hl-4"> - FunkoPop que se desea imprimir en la consola</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> </span><span class="hl-11">{void}</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-6">static</span><span class="hl-1"> </span><span class="hl-5">print</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">table</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">description</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">genre:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">brand:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">brand</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">brandId:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">brandId</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">exclusive:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">exclusive</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">especial:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">especial</span><span class="hl-1">,</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">marketPrice</span><span class="hl-1"> &lt; </span><span class="hl-8">10</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">greenBright</span><span class="hl-1">(</span><span class="hl-3">`Market Price: $</span><span class="hl-6">${</span><span class="hl-2">funko</span><span class="hl-10">.</span><span class="hl-2">marketPrice</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">marketPrice</span><span class="hl-1"> &lt; </span><span class="hl-8">20</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Market Price: $</span><span class="hl-6">${</span><span class="hl-2">funko</span><span class="hl-10">.</span><span class="hl-2">marketPrice</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">marketPrice</span><span class="hl-1"> &lt; </span><span class="hl-8">30</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-3">`Market Price: $</span><span class="hl-6">${</span><span class="hl-2">funko</span><span class="hl-10">.</span><span class="hl-2">marketPrice</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">redBright</span><span class="hl-1">(</span><span class="hl-3">`Market Price: $</span><span class="hl-6">${</span><span class="hl-2">funko</span><span class="hl-10">.</span><span class="hl-2">marketPrice</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">))</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Se define una clase llamada <code>FunkoPop</code>, que representa un objeto FunkoPop y extiende otra clase llamada <code>BasicFunkoPop</code>. La clase <code>FunkoPop</code> implementa una interfaz llamada <code>FunkoPopInfo</code> que define la información básica de un FunkoPop. La clase también tiene un constructor que acepta varios parámetros y un método estático llamado <code>print</code> que imprime la información del FunkoPop en la consola.</p>
<ul>
<li><code>Genre.ts</code>y <code>Type.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-4">/**</span><br/><span class="hl-4"> * Enumeración de géneros para figuras de Funko.</span><br/><span class="hl-4"> * </span><span class="hl-6">@enum</span><br/><span class="hl-4"> */</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">enum</span><span class="hl-1"> </span><span class="hl-11">FunkoGenre</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Animación </span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">ANIMATION</span><span class="hl-1"> = </span><span class="hl-3">&#39;Animation&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Anime </span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">ANIME</span><span class="hl-1"> = </span><span class="hl-3">&#39;Anime&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Películas y TV </span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">MOVIES_AND_TV</span><span class="hl-1"> = </span><span class="hl-3">&#39;Movies and TV&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Videojuegos </span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">VIDEO_GAMES</span><span class="hl-1"> = </span><span class="hl-3">&#39;Video Games&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Música </span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">MUSIC</span><span class="hl-1"> = </span><span class="hl-3">&#39;Music&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Cómics </span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">COMICS</span><span class="hl-1"> = </span><span class="hl-3">&#39;Comics&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Deportes</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">SPORTS</span><span class="hl-1"> = </span><span class="hl-3">&#39;Sports&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code></pre>
<pre><code class="language-TypeScript"><span class="hl-4">/**</span><br/><span class="hl-4"> * Enumeración que representa los distintos tipos de funkos.</span><br/><span class="hl-4"> * </span><span class="hl-6">@enum</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">enum</span><span class="hl-1"> </span><span class="hl-11">FunkoType</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Pop!&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">POP</span><span class="hl-1"> = </span><span class="hl-3">&#39;Pop!&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Pop! Black and White&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">POP_BLACK_AND_WHITE</span><span class="hl-1"> = </span><span class="hl-3">&#39;Pop! Black and White&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Pop! Glitter&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">POP_GLITTER</span><span class="hl-1"> = </span><span class="hl-3">&#39;Pop! Glitter&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Pop! Rides&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">POP_RIDES</span><span class="hl-1"> = </span><span class="hl-3">&#39;Pop! Rides&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Vynil Soda&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">VYNIL_SODA</span><span class="hl-1"> = </span><span class="hl-3">&#39;Vynil Soda&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Vynil Gold&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">VYNIL_GOLDEN</span><span class="hl-1"> = </span><span class="hl-3">&#39;Vynil Gold&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Tipo de funko &quot;Pop! Keychain&quot;</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-7">POP_KEYCHAIN</span><span class="hl-1"> = </span><span class="hl-3">&#39;Pop! Keychain&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para clasificar los funkos dependiendo de su tipo y género.</p>
<ul>
<li><code>user.ts</code>:</li>
</ul>
<pre><code class="language-TypeScript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;chalk&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">FunkoPop</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;../Funko/FunkoPop.js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Interfaz que define los métodos y propiedades que debe tener un usuario.</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">UserInfo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Nombre del usuario.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Lista de Funko Pops de la colección del usuario.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-2">collection</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">[];</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Agrega un Funko Pop a la colección del usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> Funko Pop a agregar a la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje de éxito o error.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Modifica un Funko Pop de la colección del usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> Funko Pop modificado.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje de éxito o error.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">updateFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Elimina un Funko Pop de la colección del usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">id</span><span class="hl-4"> ID del Funko Pop a eliminar.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje de éxito o error.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">removeFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Imprime en consola la lista de Funko Pops de la colección del usuario.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">listFunkos</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Busca un Funko Pop en la colección del usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">id</span><span class="hl-4"> ID del Funko Pop a buscar.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje de éxito o error.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">searchFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Guarda la colección del usuario en un archivo.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">save</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Carga la colección del usuario desde un archivo.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-5">load</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Clase que implementa la interfaz UserInfo.</span><br/><span class="hl-4"> */</span><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-11">User</span><span class="hl-1"> </span><span class="hl-6">implements</span><span class="hl-1"> </span><span class="hl-11">UserInfo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Lista de Funko Pops de la colección del usuario.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-2">collection</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">[];</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Crea un nuevo usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">name</span><span class="hl-4"> Nombre del usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPops</span><span class="hl-4"> Lista de Funko Pops para agregar a la colección del usuario.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-6">readonly</span><span class="hl-1"> </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">, ...</span><span class="hl-2">funkoPops</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">[]) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1"> = </span><span class="hl-2">funkoPops</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Agrega un Funko Pop a la colección del usuario.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> Funko Pop a agregar a la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje de éxito o error.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">notSameId</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">f</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">f</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> !== </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">notSameId</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> !== </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">`Ya existe un Funko Pop con el ID </span><span class="hl-6">${</span><span class="hl-2">funkoPop</span><span class="hl-10">.</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> en la colección de </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`</span><span class="hl-6">${</span><span class="hl-2">funkoPop</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3"> agregado a la colección de </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Actualiza un FunkoPop en la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">funkoPop</span><span class="hl-4"> - El FunkoPop a actualizar.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje indicando si se ha actualizado el FunkoPop o si no se ha encontrado en la colección.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">updateFunko</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">: </span><span class="hl-11">FunkoPop</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">notSameId</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">f</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">f</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> !== </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">notSameId</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> === </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">`Funko Pop with id </span><span class="hl-6">${</span><span class="hl-2">funkoPop</span><span class="hl-10">.</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> not in </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">map</span><span class="hl-1">((</span><span class="hl-2">f</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><br/><span class="hl-1">      </span><span class="hl-2">f</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> === </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> ? </span><span class="hl-2">funkoPop</span><span class="hl-1"> : </span><span class="hl-2">f</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-3">`Funko Pop with id </span><span class="hl-6">${</span><span class="hl-2">funkoPop</span><span class="hl-10">.</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> modified in </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Elimina un FunkoPop de la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">id</span><span class="hl-4"> - El ID del FunkoPop a eliminar.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje indicando si se ha eliminado el FunkoPop o si no se ha encontrado en la colección.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">removeFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">notSameId</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">f</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">f</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> !== </span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">notSameId</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> === </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">`Funko Pop with id </span><span class="hl-6">${</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> not in </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1"> = </span><span class="hl-2">notSameId</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-3">`Funko Pop with id </span><span class="hl-6">${</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> removed from </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-4">/**</span><br/><span class="hl-4">   * Busca un FunkoPop en la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@param</span><span class="hl-4"> </span><span class="hl-2">id</span><span class="hl-4"> - El ID del FunkoPop a buscar.</span><br/><span class="hl-4">   * </span><span class="hl-6">@returns</span><span class="hl-4"> Un mensaje indicando si se ha encontrado el FunkoPop o si no se ha encontrado en la colección.</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">searchFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">): </span><span class="hl-11">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">notSameId</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">f</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">f</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> !== </span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">notSameId</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> === </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">`Funko Pop with id </span><span class="hl-6">${</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> not in </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><br/><span class="hl-1">      )</span><br/><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">find</span><span class="hl-1">((</span><span class="hl-2">f</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">f</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> === </span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">result</span><span class="hl-1">) </span><span class="hl-2">FunkoPop</span><span class="hl-1">.</span><span class="hl-5">print</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-3">`Funko Pop with id </span><span class="hl-6">${</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> found in </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-10">.</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">&#39;s collection`</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">listFunkos</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-2">funkoPop</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">FunkoPop</span><span class="hl-1">.</span><span class="hl-5">print</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">))</span><br/><span class="hl-1">  }</span><br/><br/><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Carga la colección de Funko Pops.</span><br/><span class="hl-4">   * Si no existe la carpeta de datos, la crea.</span><br/><span class="hl-4">   * Si no existe la carpeta con el nombre de la colección, la crea.</span><br/><span class="hl-4">   * Lee los archivos json de los Funko Pops de la colección y los añade a la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@memberof</span><span class="hl-4"> </span><span class="hl-11">FunkoPopCollection</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">load</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-3">&#39;./data&#39;</span><span class="hl-1">)) </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">mkdirSync</span><span class="hl-1">(</span><span class="hl-3">&#39;./data&#39;</span><span class="hl-1">); </span><span class="hl-4">// Crea la carpeta de datos si no existe</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">name</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-5">replace</span><span class="hl-1">(</span><span class="hl-12">/ /</span><span class="hl-6">g</span><span class="hl-1">, </span><span class="hl-3">&#39;_&#39;</span><span class="hl-1">); </span><span class="hl-4">// Reemplaza espacios en blanco en el nombre de la colección con &quot;_&quot;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-3">`./data/</span><span class="hl-6">${</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">)) { </span><span class="hl-4">// Crea la carpeta de la colección si no existe</span><br/><span class="hl-1">      </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">mkdirSync</span><span class="hl-1">(</span><span class="hl-3">`./data/</span><span class="hl-6">${</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">readdirSync</span><span class="hl-1">(</span><span class="hl-3">`./data/</span><span class="hl-6">${</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">).</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-2">file</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-4">// Lee los archivos json de los Funko Pops de la carpeta de la colección</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">file</span><span class="hl-1">.</span><span class="hl-5">match</span><span class="hl-1">(</span><span class="hl-12">/Funko-\d</span><span class="hl-13">+</span><span class="hl-12">.json/</span><span class="hl-1">)) { </span><span class="hl-4">// Selecciona solo los archivos que tienen un formato de nombre específico</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">file</span><span class="hl-1"> !== </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">fd</span><span class="hl-1"> = </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">readFileSync</span><span class="hl-1">(</span><span class="hl-3">`./data/</span><span class="hl-6">${</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">/</span><span class="hl-6">${</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">, </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funkoPop</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">fd</span><span class="hl-1">); </span><span class="hl-4">// Parsea el contenido del archivo json en un objeto de FunkoPop</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">FunkoPop</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">description</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">brand</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">brandId</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">marketPrice</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">exclusive</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">funkoPop</span><span class="hl-1">.</span><span class="hl-2">especial</span><br/><span class="hl-1">            )</span><br/><span class="hl-1">          ); </span><span class="hl-4">// Añade el objeto de FunkoPop a la colección</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">/** </span><br/><span class="hl-4">   * Guarda la colección de Funko Pops.</span><br/><span class="hl-4">   * Ordena la colección por id.</span><br/><span class="hl-4">   * Reemplaza espacios en blanco en el nombre de la colección con &quot;_&quot;.</span><br/><span class="hl-4">   * Guarda cada Funko Pop de la colección en un archivo json en la carpeta de la colección.</span><br/><span class="hl-4">   * </span><span class="hl-6">@memberof</span><span class="hl-4"> </span><span class="hl-11">FunkoPopCollection</span><br/><span class="hl-4">   */</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">save</span><span class="hl-1">(): </span><span class="hl-11">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">.</span><span class="hl-5">sort</span><span class="hl-1">((</span><span class="hl-2">a</span><span class="hl-1">, </span><span class="hl-2">b</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> (</span><span class="hl-2">a</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> &lt; </span><span class="hl-2">b</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> ? -</span><span class="hl-8">1</span><span class="hl-1"> : </span><span class="hl-8">1</span><span class="hl-1">)); </span><span class="hl-4">// Ordena la colección por id</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">name</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-5">replace</span><span class="hl-1">(</span><span class="hl-12">/ /</span><span class="hl-6">g</span><span class="hl-1">, </span><span class="hl-3">&#39;_&#39;</span><span class="hl-1">); </span><span class="hl-4">// Reemplaza espacios en blanco en el nombre de la colección con &quot;_&quot;</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funkoPop</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">collection</span><span class="hl-1">) { </span><span class="hl-4">// Itera por cada objeto de FunkoPop en la colección</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">data</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">funkoPop</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">writeFileSync</span><span class="hl-1">(</span><span class="hl-3">`./data/</span><span class="hl-6">${</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">/Funko-</span><span class="hl-6">${</span><span class="hl-2">funkoPop</span><span class="hl-10">.</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3">.json`</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">); </span><span class="hl-4">// Guarda cada FunkoPop en un archivo json con el formato de nombre específico en la carpeta de la colección</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Por último se define una interfaz <code>UserInfo</code> que contiene los métodos y propiedades que debe tener un usuario, y una clase <code>User</code> que implementa la interfaz <code>UserInfo</code>. La clase <code>User</code> contiene propiedades y métodos para administrar una colección de objetos FunkoPop, como agregar, actualizar, eliminar, buscar y listar Funko Pops, y guardar y cargar la colección desde un archivo. </p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h2>Conclusiones</h2>
</a>
<p>Además de utilizar las funcionalidades proporcionadas por Node, en esta práctica se ha hecho uso extensivo de TypeScript al igual que en las prácticas anteriores.</p>
<p>En cuanto a la programación asíncrona, esta es una forma de programación en la que el flujo de ejecución no se bloquea esperando que una operación se complete, sino que se continúa con otras operaciones y se utiliza un mecanismo de callback para manejar la finalización de la operación asíncrona.</p>
<p>Por lo tanto, esta práctica ha sido una buena oportunidad para aprender sobre las funcionalidades que ofrece Node, el uso de TypeScript y la programación asíncrona. Estos conceptos son fundamentales en el desarrollo de aplicaciones modernas y escalables, por lo que es importante tener un buen conocimiento de ellos para desarrollar software de calidad.</p>

<a href="#elementos-bibliográficos" id="elementos-bibliográficos" style="color: inherit; text-decoration: none;">
  <h2>Elementos Bibliográficos:</h2>
</a>
<ul>
<li><p>Principios SOLID, <a href="https://profile.es/blog/principios-solid-desarrollo-software-calidad/">https://profile.es/blog/principios-solid-desarrollo-software-calidad/</a>.</p>
</li>
<li><p>Guión de la Práctica 10, <a href="https://ull-esit-inf-dsi-2223.github.io/prct10-fs-proc-sockets-funko-app/">https://ull-esit-inf-dsi-2223.github.io/prct10-fs-proc-sockets-funko-app/</a> .</p>
</li>
<li><p>Sobre un warning en particular de TypeDoc, <a href="https://github.com/TypeStrong/typedoc/issues/1739">https://github.com/TypeStrong/typedoc/issues/1739</a> .</p>
</li>
<li><p>Adam Freeman - Essential TypeScript 4: From Beginner to ProURL,<a href="https://www.oreilly.com/library/view/essential-typescript-4/9781484270110/html/Part_1.xhtml">https://www.oreilly.com/library/view/essential-typescript-4/9781484270110/html/Part_1.xhtml</a> .</p>
</li>
<li><p>Basic writing and formatting syntax, <a href="https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax</a> .</p>
</li>
</ul>
<p>By:</p>
<pre><code><span class="hl-7">EEEEEEEEEEEEEE</span><span class="hl-1">   </span><span class="hl-7">DDDDDDDDDDDDD</span><span class="hl-1">         </span><span class="hl-7">UUUUUUU</span><span class="hl-1">       </span><span class="hl-7">UUUUUUU</span><br/><span class="hl-14">E</span><span class="hl-1">::::::::::::</span><span class="hl-7">E</span><span class="hl-1">   </span><span class="hl-14">D</span><span class="hl-1">:::::::::::::</span><span class="hl-7">D</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><br/><span class="hl-14">E</span><span class="hl-1">::::::::::::</span><span class="hl-7">E</span><span class="hl-1">   </span><span class="hl-14">D</span><span class="hl-1">:::::::::::::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><br/><span class="hl-14">EE</span><span class="hl-1">:::::::</span><span class="hl-7">EEEEE</span><span class="hl-1">   </span><span class="hl-14">DDD</span><span class="hl-1">::::</span><span class="hl-14">DDDDD</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">    </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">:::::</span><span class="hl-7">E</span><span class="hl-1">         </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">    </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">   </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">:::::</span><span class="hl-7">E</span><span class="hl-1">         </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">  </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">::::::</span><span class="hl-7">EEEEEEE</span><span class="hl-1">  </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">  </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">::::::::::::</span><span class="hl-7">E</span><span class="hl-1">  </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">  </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">::::::::::::</span><span class="hl-7">E</span><span class="hl-1">  </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">  </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">::::::</span><span class="hl-7">EEEEEEE</span><span class="hl-1">  </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">  </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">:::::</span><span class="hl-7">E</span><span class="hl-1">         </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">  </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1">       </span><span class="hl-14">U</span><span class="hl-1">:::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-14">E</span><span class="hl-1">:::::</span><span class="hl-7">E</span><span class="hl-1">         </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">    </span><span class="hl-14">D</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">   </span><span class="hl-14">U</span><span class="hl-1">::::::</span><span class="hl-7">U</span><span class="hl-1">     </span><span class="hl-14">U</span><span class="hl-1">::::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-14">EE</span><span class="hl-1">:::::::</span><span class="hl-7">EEEEE</span><span class="hl-1">   </span><span class="hl-14">DDD</span><span class="hl-1">::::</span><span class="hl-14">DDDDD</span><span class="hl-1">:::::</span><span class="hl-7">D</span><span class="hl-1">     </span><span class="hl-14">U</span><span class="hl-1">:::::::</span><span class="hl-14">UUU</span><span class="hl-1">:::::::</span><span class="hl-7">U</span><span class="hl-1"> </span><br/><span class="hl-14">E</span><span class="hl-1">::::::::::::</span><span class="hl-7">E</span><span class="hl-1">   </span><span class="hl-14">D</span><span class="hl-1">:::::::::::::::</span><span class="hl-7">D</span><span class="hl-1">       </span><span class="hl-14">UU</span><span class="hl-1">:::::::::::::</span><span class="hl-7">UU</span><span class="hl-1">  </span><br/><span class="hl-14">E</span><span class="hl-1">::::::::::::</span><span class="hl-7">E</span><span class="hl-1">   </span><span class="hl-14">D</span><span class="hl-1">:::::::::::::</span><span class="hl-7">D</span><span class="hl-1">           </span><span class="hl-14">UU</span><span class="hl-1">:::::::::</span><span class="hl-7">UU</span><span class="hl-1">    </span><br/><span class="hl-7">EEEEEEEEEEEEEE</span><span class="hl-1">   </span><span class="hl-7">DDDDDDDDDDDDD</span><span class="hl-1">               </span><span class="hl-7">UUUUUUUUU</span><span class="hl-1">  </span>
</code></pre>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">prct09</a>
<ul>
<li class="tsd-kind-module"><a href="modules/Ejercicio_1_Ejercicio_1.html">Ejercicio-<wbr/>1/<wbr/>Ejercicio-<wbr/>1</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_2_NoPipeReader.html">Ejercicio-<wbr/>2/<wbr/>No<wbr/>Pipe<wbr/>Reader</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_2_PipeReader.html">Ejercicio-<wbr/>2/<wbr/>Pipe<wbr/>Reader</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_AppFunko_Client.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>App<wbr/>Funko/<wbr/>Client</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_AppFunko_FunkoApp.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>App<wbr/>Funko/<wbr/>Funko<wbr/>App</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_AppFunko_Helpers.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>App<wbr/>Funko/<wbr/>Helpers</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_Funko_BasicFunkoPop.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>Funko/<wbr/>Basic<wbr/>Funko<wbr/>Pop</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_Funko_FunkoPop.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>Funko/<wbr/>Funko<wbr/>Pop</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_Funko_Genre.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>Funko/<wbr/>Genre</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_Funko_Type.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>Funko/<wbr/>Type</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_FunkoAPP_User_user.html">Ejercicio-<wbr/>FunkoAPP/<wbr/>User/user</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_PE103_client.html">Ejercicio-<wbr/>PE103/client</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_PE103_command.html">Ejercicio-<wbr/>PE103/command</a></li>
<li class="tsd-kind-module"><a href="modules/Ejercicio_PE103_server.html">Ejercicio-<wbr/>PE103/server</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>